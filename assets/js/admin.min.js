/*!
admin.js
(c) 2017 IG PROG, www.igprog.hr
*/
angular.module("app", []).controller("adminCtrl", ["$scope", "$http", "$rootScope", function (t, a, n) { a.get("./config/config.json").then(function (t) { n.config = t.data }), t.islogin = !1; var o = new Date; t.year = o.getFullYear(), t.toggleTpl = function (a) { t.tpl = a }, t.toggleTpl("login"), init = function () { t.user = { username: "", password: "" } }, init(), t.login = function (o) { a({ url: n.config.backend + "Admin.asmx/Login", method: "POST", data: { username: o.username, password: o.password } }).then(function (a) { t.islogin = JSON.parse(a.data.d), 1 == t.islogin ? t.toggleTpl("programPrehraneWeb") : alert("error login") }, function (a) { t.islogin = !1, alert(a.data.d) }) }, t.logout = function () { t.islogin = !1, t.toggleTpl("login"), init() } }]).controller("applicationCtrl", ["$scope", "$http", "$rootScope", function (t, a, n) { a({ url: n.config.backend + "Instal.asmx/Load", method: "POST", data: "" }).then(function (a) { t.d = JSON.parse(a.data.d) }, function (t) { alert(t.data.d) }) }]).controller("webAppCtrl", ["$scope", "$http", "$rootScope", function (t, a, n) { t.showDetails = !1; var o = function () { a({ url: n.config.backend + "Users.asmx/Load", method: "POST", data: "" }).then(function (a) { t.d = JSON.parse(a.data.d) }, function (t) { alert(t.data.d) }) }; o(); var e = function () { a({ url: n.config.backend + "Users.asmx/Total", method: "POST", data: "" }).then(function (a) { t.t = JSON.parse(a.data.d) }, function (t) { alert(t.data.d) }) }; e(), t.update = function (t) { a({ url: n.config.backend + "Users.asmx/Update", method: "POST", data: { x: t } }).then(function (t) { o(), e(), alert(t.data.d) }, function (t) { alert(t.data.d) }) }, t.remove = function (t) { 1 == confirm("Bri≈°i " + t.firstName + " " + t.lastName + "?") && i(t) }; var i = function (t) { a({ url: n.config.backend + "Users.asmx/Delete", method: "POST", data: { x: t } }).then(function (t) { o(), e(), alert(t.data.d) }, function (t) { alert(t.data.d) }) }; t.idxStart = 0, t.idxEnd = 10, t.setPage = function (a) { t.idxStart = 0 + a, t.idxEnd = 10 + a }, t.showAllPages = function () { t.idxStart = 0, t.idxEnd = t.d.length }, google.charts.load("current", { packages: ["line"] }), google.charts.setOnLoadCallback(function () { var t = new google.visualization.DataTable; t.addColumn("number", "Aktivacije"), t.addColumn("number", "Postotak licenci"), a({ url: n.config.backend + "Users.asmx/TotalList", method: "POST", data: "" }).then(function (a) { var n = JSON.parse(a.data.d); angular.forEach(n, function (a, n) { t.addRows([[n, a.licencepercentage]]) }); var o = new google.charts.Line(document.getElementById("chart_ppweb")); o.draw(t, google.charts.Line.convertOptions({ chart: { title: "Pregled registracija i aktivacija" }, height: 250 })) }, function (t) { alert(t.data.d) }) }) }]).controller("ordersCtrl", ["$scope", "$http", "$rootScope", function (t, a, n) { a({ url: n.config.backend + "Orders.asmx/Load", method: "POST", data: "" }).then(function (a) { t.orders = JSON.parse(a.data.d) }, function (t) { alert(t.data.d) }) }]);