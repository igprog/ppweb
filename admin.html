<!DOCTYPE html>
<html lang="en">
<head>
    <title>Program Prehrane - Admin</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="../assets/css/vendor/bootstrap.min.css">
    <!--*********** FontAwesome ***********-->
    <script src="../assets/js/vendor/fontawesome.min.js"></script>
    <script src="../assets/js/vendor/solid.min.js"></script>
    <link rel="stylesheet" href="../assets/css/vendor/solid.min.css">
    <!--*********** FontAwesome ***********-->
    <link rel="stylesheet" href="../assets/css/style.css">
    <script src="../assets/js/vendor/jquery.min.js"></script>
    <script src="../assets/js/vendor/bootstrap.min.js"></script>
    <script src="../assets/js/vendor/angular.min.js"></script>
    <script src="../assets/js/vendor/angular-animate.min.js"></script>
    <script src="../assets/js/vendor/angular-aria.min.js"></script>
    <script src="../assets/js/vendor/angular-messages.min.js"></script>
    <script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
	<link rel="icon" type="image/x-icon" href="/favicon.ico?v=1" />
    <link href='https://fonts.googleapis.com/css?family=Encode Sans Expanded' rel='stylesheet'>
    <style>
        body {
            font-size: 14px;
        }
    </style>
</head>
<body ng-app="app" ng-controller="adminCtrl" style="color:black">
    <nav class="navbar navbar-expand-md navbar-dark bg-dark">
        <a href="" class="navbar-brand">Admin</a>
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarNavDropdown" aria-controls="navbarNavDropdown" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNavDropdown">
            <ul class="navbar-nav" ng-cloak>
                <li class="nav-item"><a href="../index.html" class="nav-link" target="_blank"><span class="fa fa-home"></span> Home</a></li>
                <li ng-if="islogin" class="nav-item" ng-click="toggleTpl('programPrehraneWeb')"><a href="" class="nav-link">Web App</a></li>
                <li ng-if="islogin" class="nav-item" ng-click="toggleTpl('programPrehrane5')"><a href="" class="nav-link">Instalacije</a></li>
                <li ng-if="islogin" class="nav-item" ng-click="toggleTpl('orders')"><a href="" class="nav-link">Narudžbe</a></li>
                <li ng-if="islogin" class="nav-item" ng-click="toggleTpl('invoices')"><a href="" class="nav-link">Računi</a></li>
                <li ng-if="islogin" class="nav-item" ng-click="toggleTpl('settings')"><a href="" class="nav-link">Postavke</a></li>
            </ul>
            <ul class="navbar-nav ml-auto" ng-cloak>
                <li ng-click="logout()" class="nav-item"><a href="" class="nav-link"><span class="fa fa-sign-out-alt"></span> Odjava</a></li>
            </ul>
        </div>
    </nav>

    <div ng-include="tpl" style="padding-top:20px"></div>

    <script type="text/ng-template" id="login">
        <div class="container pt-5">
            <div class="row">
                <div class="col-lg-4">
                    <fieldset class="fieldset-border">
                        <legend class="fieldset-border">Login</legend>
                        <form id="loginform">
                            <div class="input-group mt-3 p-1">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-user"></i></span>
                                </div>
                                <input ng-model="user.username" type="text" class="form-control" name="email" placeholder="Email">
                            </div>
                            <div class="input-group p-1">
                                <div class="input-group-prepend">
                                    <span class="input-group-text"><i class="fa fa-unlock"></i></span>
                                </div>
                                <input ng-model="user.password" type="password" class="form-control" name="password" placeholder="Password">
                            </div>
                        </form>
                        <div class="text-right p-1">
                            <button type="submit" form="loginform" ng-click="login(user)" class="btn btn-outline-secondary"><i class="fa fa-key"></i> Login</button>
                        </div>
                    </fieldset>
                </div>
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="programPrehraneWeb">
        <div ng-controller="webAppCtrl" class="container-fluid" style="padding-bottom:40px">
            <h2>Program Prehrane Web</h2>
            <div>
                <ul class="nav nav-tabs">
                    <li class="nav-item" ng-class="activeTab==='users'?'nav-link active':'nav-link'" ng-click="search(searchQuery, showActive, licenceStatus, limit, isDesc)"><a href=""><i class="fa fa-users"></i> Korisnici</a></li>
                    <li class="nav-item" ng-class="activeTab==='total'?'nav-link active':'nav-link'" ng-click="total(year)"><a href=""><i class="fa fa-chart-bar"></i> Analitika</a></li>
                    <li class="nav-item" ng-class="activeTab==='sharingRecipes'?'nav-link active':'nav-link'" ng-click="loadSharingRecipes()"><a href=""><i class="fa fa-share-alt"></i> Podijeljeni Recepti</a></li>
                    <li class="nav-item" ng-class="activeTab==='errorLog'?'nav-link active':'nav-link'" ng-click="loadErrorLog()"><a href=""><i class="fa fa-exclamation-triangle"></i> Error Log</a></li>
                    <li class="nav-item" ng-class="activeTab==='activityLog'?'nav-link active':'nav-link'" ng-click="loadActivityLog()"><a href=""><i class="fa fa-sign-in-alt"></i> Activity Log</a></li>
                    <li class="nav-item" ng-class="activeTab==='tickets'?'nav-link active':'nav-link'" ng-click="loadTickets(0, null)"><a href=""><i class="fa fa-ticket-alt"></i> Tickets</a></li>
                </ul>
            </div>
            <div ng-if="activeTab==='users'">
                <div class="row p-1">
                    <div class="col-lg-3">
                        <form id="serchFrm">
                            <span class="p-2">Pretraži:</span>
                            <div class="input-group">
                                <input ng-model="searchQuery" type="text" class="form-control" placeholder="Ime, E-mail, ID...">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" form="serchFrm" type="submit" ng-click="search(searchQuery, showActive, licenceStatus, limit, isDesc)">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                    <div class="col-lg-1">
                        <span>Limit: <input ng-model="limit" class="form-control" /></span>
                    </div>
                    <div class="col-lg-2">
                        <span class="p-2">Admin Code:</span>
                        <div class="input-group">
                            <input ng-model="adminCode" type="password" class="form-control">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" form="adminCodeFrm" type="submit" ng-click="checkAdminCode(adminCode)">
                                    <i class="fa fa-check"></i>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="row p-1">
                    <div class="col-sm-3 checkbox px-3">
                        <label class="pr-2"><input type="checkbox" ng-model="showDetails" /> Prikaži detalje / uredi</label>
                        <label><input type="checkbox" ng-model="showActive" ng-click="search(searchQuery, showActive, licenceStatus, limit, isDesc)" /> Prikaži aktivne</label>
                    </div>
                    <div class="col-sm-3">
                        <label class="m-0">Status licence:</label>
                        <select ng-model="licenceStatus" class="form-control" ng-change="search(searchQuery, showActive, licenceStatus, limit, isDesc)">
                            <option value="">Svi</option>
                            <option value="demo">Demo</option>
                            <option value="expired">Istekla licenca</option>
                            <option value="active">Aktivan</option>
                        </select>
                    </div>
                </div>
                <div ng-if="loading" class="text-center text-primary">
                    <label class="lead text-primary">Učitavanje...</label>
                    <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                </div>
                <div ng-if="!loading" class="p-1">
                    <button class="btn btn-outline-secondary" ng-click="prevPage(limit)"><i class="fa fa-arrow-left"></i> Nazad</button>
                    <span class="badge badge-secondary">{{page}}</span>
                    <button class="btn btn-outline-secondary" ng-click="nextPage(limit)">Naprijed <i class="fa fa-arrow-right"></i></button>
                </div>
                <div ng-if="!loading" class="table-responsive" style="max-height:70vh">
                    <table class="table table-sm">
                        <tr>
                            <th></th>
                            <th>Br. <a href="" ng-click="search(searchQuery, showActive, licenceStatus, limit, !isDesc)" title="{{isDesc?'Prikaži najstarije':'Prikaži najnovije'}}"><i class="fa fa-sort"></i></a></th>
                            <th ng-if="showDetails">UserId</th>
                            <th ng-if="showDetails">UserGroupId</th>
                            <th>Ime</th>
                            <th>Prezime</th>
                            <th ng-if="showDetails">Tvrtka</th>
                            <th ng-if="showDetails">Adresa</th>
                            <th ng-if="showDetails" class="nowrap">Poštanski broj</th>
                            <th ng-if="showDetails">Grad</th>
                            <th ng-if="showDetails">Država</th>
                            <th ng-if="showDetails">OIB</th>
                            <th>Email</th>
                            <th ng-if="showDetails" class="nowrap">Korisničko ime</th>
                            <th ng-if="showDetails" class="nowrap">Tip admina</th>
                            <th class="nowrap">Datum aktivacije</th>
                            <th class="nowrap">Istek aktivacije</th>
                            <th ng-if="showDetails"></th>
                            <th>Aktivan</th>
                            <th class="nowrap">Status</th>
                            <th class="nowrap" style="min-width:150px">Licenca</th>
                            <th>Max. br. korisnika</th>
                            <th>Broj korisnika</th>
                            <th colspan="3"></th>
                        </tr>
                        <tr ng-class="x.userId!=x.userGroupId?'text-muted':''" ng-repeat="x in d track by $index">
                            <td>
                                <button ng-click="info(x)" class="btn btn-info" data-toggle="modal" data-target="#myModal"><i class="fa fa-info"></i></button>
                            </td>
                            <td>{{x.rowid}}</td>
                            <td ng-if="showDetails" class="nowrap">{{x.userId}}</td>
                            <td ng-if="showDetails" class="nowrap">
                                {{x.userGroupId}}
                                <input ng-if="config.debug" ng-model="x.userGroupId" class="form-control" />
                            </td>
                            <td>{{x.firstName}}</td>
                            <td>{{x.lastName}}</td>
                            <td ng-if="showDetails" class="nowrap">{{x.companyName}}</td>
                            <td ng-if="showDetails" class="nowrap">{{x.address}}</td>
                            <td ng-if="showDetails">{{x.postalCode}}</td>
                            <td ng-if="showDetails">{{x.city}}</td>
                            <td ng-if="showDetails">{{x.country}}</td>
                            <td ng-if="showDetails">{{x.pin}}</td>
                            <td>{{x.email}}</td>
                            <td ng-if="showDetails">{{x.userName}}</td>
                            <td ng-if="showDetails">
                                {{x.adminType}}
                                <input ng-if="config.debug" ng-model="x.adminType" type="number" class="form-control" />
                            </td>
                            <td><input ng-disabled="!showDetails" ng-model="x.activationDate" type="text" /></td>
                            <td><input ng-disabled="!showDetails" ng-model="x.expirationDate" type="text" /></td>
                            <td ng-if="showDetails">
                                <button class="btn btn-outline-primary" ng-click="addYear($index)" title="Produži na godinu dana"><i class="fa fa-caret-right"></i></button>
                            </td>
                            <td><input ng-disabled="!showDetails" ng-model="x.isActive" type="checkbox" class="form-control" /></td>
                            <td>{{x.licenceStatus}}</td>
                            <td>
                                <select ng-disabled="!showDetails" ng-model="x.userType" class="form-control">
                                    <option value="0" ng-selected="x.userType==0?true:false">Start</option>
                                    <option value="1" ng-selected="x.userType==1?true:false">Standard</option>
                                    <option value="2" ng-selected="x.userType==2?true:false">Premium</option>
                                </select>
                            </td>
                            <td><input ng-disabled="!showDetails||x.userType<2||x.userId!=x.userGroupId" ng-model="x.maxNumberOfUsers" type="number" class="form-control" /></td>
                            <td>{{x.subusers + 1}}</td>
                            <td><button ng-disabled="!showDetails" ng-click="update(x)" class="btn btn-success" title="Spremi"><i class="fa fa-save"></i></button></td>
                            <td>
                                <div ng-if="x.maxNumberOfUsers>5&&showDetails&&x.userType==2&&x.userId==x.userGroupId" class="input-group">
                                    <input ng-model="prefix" type="text" class="form-control" placeholder="Prefiks..." style="min-width:100px">
                                    <div class="input-group-btn">
                                        <button class="btn btn-warning" ng-click="createSubusers(x, prefix)">
                                            Kreiraj korisnike
                                        </button>
                                    </div>
                                </div>
                            </td>
                            <td ng-if="config.debug"><button ng-disabled="!showDetails" ng-click="remove(x)" class="btn btn-danger" title="Briši"><i class="fa fa-trash-alt"></i></button></td>
                        </tr>
                    </table>
                </div>
                <div ng-if="!loading" class="mt-1">
                    <button class="btn btn-outline-secondary" ng-click="prevPage()"><i class="fa fa-arrow-left"></i> Nazad</button>
                    <span class="badge badge-secondary">{{page}}</span>
                    <button class="btn btn-outline-secondary" ng-click="nextPage()">Naprijed <i class="fa fa-arrow-right"></i></button>
                </div>
            </div>

            <div ng-if="activeTab==='total'">
                <div class="row mt-5">
                    <div class="col-sm-4">
                        <div>
                            <select ng-model="year" ng-options="x for x in years" ng-change="total(year)" class="form-control"></select>
                        </div>
                        <fieldset class="fieldset-border">
                            <legend class="fieldset-border">Statistika</legend>
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tr>
                                        <td class="text-left">Registriranih korisnika:</td>
                                        <td class="text-left"><strong>{{t.total}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Aktivnih korisnika:</td>
                                        <td class="text-left"><strong>{{t.active}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Licence</td>
                                        <td class="text-left"><strong>{{t.licence}}</strong> <span class="badge badge-success">{{t.licencepercentage}} %</span></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Pod licence:</td>
                                        <td class="text-left"><strong>{{t.subuser}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Demo:</td>
                                        <td class="text-left"><strong>{{t.demo}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Istekle licence:</td>
                                        <td class="text-left"><strong>{{t.expired}}</strong></td>
                                    </tr>
                                    <tr>
                                        <td class="text-left">Korisnici aplikacije za klijente:</td>
                                        <td class="text-left"><strong>{{t.clientapp}}</strong></td>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                    <div class="col-sm-8">
                        <div ng-if="loading" class="text-center text-primary">
                            <label class="lead text-primary">Učitavanje...</label>
                            <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                        </div>
                    </div>
                </div>
                <div class="row mt-5">
                    <div class="col-sm-7">
                        <fieldset class="fieldset-border">
                            <legend class="fieldset-border">
                                Statistika po mjesecima
                            </legend>
                            <!--<div>
                                <div ng-if="loadingChart" class="text-center text-primary">
                                    <label class="lead text-primary">Učitavanje...</label>
                                    <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                                </div>
                                <div id="chart_ppweb"></div>
                            </div>-->
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tr>
                                        <th class="text-left">Mjesec</th>
                                        <th class="text-left">Registracije</th>
                                        <th class="text-left">Licence</th>
                                        <th>Postotak</th>
                                        <th style="width:30%"></th>
                                    </tr>
                                    <tr ng-repeat="x in t.monthly">
                                        <td class="text-left">{{x.month}}</td>
                                        <td class="text-left"><strong class="badge badge-primary">{{x.registration}}</strong></td>
                                        <td class="text-left"><strong class="badge badge-warning">{{x.licence}}</strong></td>
                                        <td><span class="badge badge-success">{{x.percentage}} %</span></td>
                                        <td class="text-left">
                                            <div style="width:{{x.registration*2}}px; height:10px" class="bg-primary" title="Registracije: {{x.registration}}"></div>
                                            <div style="width:{{x.licence*2}}px; height:10px" class="bg-warning" title="Licence: {{x.licence}}"></div>
                                            <div style="width:{{x.percentage*2}}px; height:10px" class="bg-success" title="Postotak: {{x.percentage}}%"></div>
                                        </td>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                    <div class="col-sm-5 pt20">
                        <fieldset class="fieldset-border">
                            <legend class="fieldset-border">Statistika po gradovima</legend>
                            <div class="table-responsive">
                                <table class="table table-sm">
                                    <tr>
                                        <th class="text-left">Grad</th>
                                        <th class="text-left">Licence</th>
                                        <th style="width:30%"></th>
                                    </tr>
                                    <tr ng-repeat="x in t.city">
                                        <td class="text-left">{{x.name}}</td>
                                        <td class="text-left"><strong class="badge badge-secondary">{{x.count}}</strong></td>
                                        <td class="text-left"><div style="width:{{x.count*10}}px; height:20px" class="bg-primary" title="{{x.name}}: {{x.count}}"></div></td>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                </div>
                <div class="row">
                    <div class="col-sm-5 pt-3">
                        <fieldset class="fieldset-border">
                            <legend class="fieldset-border">Statistika po gradovima (ukupno)</legend>
                            <button ng-click="getTotalActivatedUsersByCity()" class="btn btn-outline-primary">Pregled</button>
                            <div class="table-responsive">
                                <table ng-if="activatedUsersByCity" class="table table-sm mt20">
                                    <tr>
                                        <th class="text-left">Grad</th>
                                        <th class="text-left">Licence</th>
                                        <th></th>
                                    </tr>
                                    <tr ng-repeat="x in activatedUsersByCity.cities">
                                        <td class="text-left">{{x.city}}</td>
                                        <td class="text-left"><strong class="badge badge-secondary">{{x.count}}</strong></td>
                                        <td class="text-left"><div style="width:{{x.count*10}}px; height:20px" class="bg-primary" title="{{x.name}}: {{x.count}}"></div></td>
                                    </tr>
                                    <tr>
                                        <th colspan="3" class="text-right">Ukupno: {{activatedUsersByCity.total}}</th>
                                    </tr>
                                </table>
                            </div>
                        </fieldset>
                    </div>
                </div>
            </div>

            <div ng-if="activeTab==='sharingRecipes'">
                <div class="mt-3">
                    <div ng-if="loading" class="text-center text-primary">
                        <label class="lead text-primary">Učitavanje...</label>
                        <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                    </div>
                    <div ng-if="!loading" class="row">
                        <div class="col-lg-6">
                            <div class="p-2 p-3">
                                Ukupno: <span class="badge badge-secondary">{{sharingRecipes.length}}</span>
                            </div>
                            <div class="card m-3" ng-repeat="x in sharingRecipes track by $index">
                                <div class="card-header">
                                    <a href="" ng-click="removeRecipe(x)" class="close" style="color:red!important" title="briši">&times;</a>
                                    <div class="pt-2">
                                        <label><i class="{{x.sharingData.status.ico}} text-{{x.sharingData.status.style}}"></i> {{x.title}}</label>
                                        <p class="text-muted"><em>{{x.description.length > 80 ? x.description.substring(0, 77) + '...' : x.description}}</em></p>
                                    </div>
                                </div>
                                <div class="card-body p-2">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <img ng-if="x.recipeImg" src="{{x.recipeImgPath}}" alt="{{x.recipeImg}}" style="height:6rem;width:6rem" class="img-circle rounded-circle">
                                        </div>
                                        <div class="col-sm-9">
                                            <a href="" ng-click="getSharingRecipe(x, $index)">Detalji <i class="fa fa-caret-right"></i></a>
                                            <div ng-if="x.data.selectedFoods">
                                                <em>{{x.description}}</em>
                                                <p class="pt-2">Namirnice:</p>
                                                <ul>
                                                    <li ng-repeat="y in x.data.selectedFoods"><strong>{{y.food}}</strong> <span class="text-muted small">{{y.quantity}} {{y.unit}} ({{y.mass}} g)</span></li>
                                                </ul>
                                                <hr />
                                                <p class="small text-muted">Autor : {{x.sharingData.recipeOwner.firstName}}</p>
                                                <p class="small text-muted">User ID: {{x.sharingData.recipeOwner.userId}}</p>
                                                <p class="small text-muted">Grupa obroka: {{x.mealGroup.code}} - {{x.mealGroup.title}}</p>
                                                <p class="small text-muted">Jezik: {{x.sharingData.lang}}</p>
                                                <p class="small text-muted">Pregledi: <span class="badge badge-secondary">{{x.sharingData.views}}</span></p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div ng-if="x.data.selectedFoods" class="card-footer">
                                    <div class="row">
                                        <div class="col-sm-3">
                                            <select ng-model="x.sharingData.status.code" class="form-control" title="status">
                                                <option value="0" ng-selected="x.sharingData.status.code==0?true:false">U obradi</option>
                                                <option value="1" ng-selected="x.sharingData.status.code==1?true:false">Odobren</option>
                                                <option value="2" ng-selected="x.sharingData.status.code==2?true:false">Odbijen</option>
                                            </select>
                                        </div>
                                        <div class="col-sm-6">
                                            <input ng-model="x.sharingData.status.note" class="form-control" placeholder="Napomena..." />
                                        </div>
                                        <div class="col-sm-3 text-right">
                                            <button class="btn btn-outline-success" ng-click="saveSharingRecipe(x)"><i class="fa fa-save"></i> Spremi</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="activeTab==='errorLog'">
                <div class="mt-3">
                    <div ng-if="loading" class="text-center text-primary">
                        <label class="lead text-primary">Učitavanje...</label>
                        <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="card">
                                <div class="card-header">
                                    <div>
                                        <label>Error Log</label>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <textarea ng-model="errorLog" rows="30" class="form-control" style="background-color:#3a3a3a; color:#65cdec"></textarea>
                                    <div class="text-right mt-2">
                                        <button class="btn btn-outline-primary" ng-click="saveLog('error.log', errorLog)"><i class="fa fa-save"></i> Spremi</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="activeTab==='activityLog'">
                <div class="mt-3">
                    <div ng-if="loading" class="text-center text-primary">
                        <label class="lead text-primary">Učitavanje...</label>
                        <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                    </div>
                    <div class="row">
                        <div class="col-lg-9">
                            <div class="card">
                                <div class="card-header">
                                    <div>
                                        <label>Activity Log</label>
                                    </div>
                                </div>
                                <div class="card-body">
                                    <div>
                                        <ul class="nav nav-tabs">
                                            <li class="nav-item" ng-class="activeTabActivity==='lastActivity'?'nav-link active':'nav-link'" ng-click="loadLoginLog(false)"><a href="">Zadnje prijave</a></li>
                                            <li class="nav-item" ng-class="activeTabActivity==='allActivities'?'nav-link active':'nav-link'" ng-click="loadLoginLog(true)"><a href="">Sve prijave</a></li>
                                        </ul>
                                    </div>
                                    <div class="table-responsive p-2" style="max-height:300px">
                                        <em class="text-muted">Aktivni korisnici</em>
                                        <table class="table table-sm">
                                            <tr class="table-borderless border-bottom">
                                                <th>Korisnik</th>
                                                <th>Tvrtka</th>
                                                <th>Zadnja prijava</th>
                                                <th class="text-center">Ukupno prijava</th>
                                            </tr>
                                            <tr ng-repeat="x in loginLog track by $index" class="table-borderless">
                                                <td>
                                                    <div>{{x.user.firstName}} {{x.user.lastName}}</div>
                                                </td>
                                                <td><em ng-if="x.user.companyName" class="small text-muted">{{x.user.companyName}}</em></td>
                                                <td><span class="badge badge-info mr-1">{{$index + 1}}</span>{{x.lastLogin}}</td>
                                                <td class="text-center"><span class="badge badge-success">{{x.loginCount}}</span></td>
                                            </tr>
                                        </table>
                                    </div>
                                    <div ng-if="settings.activityLogSettings.show" class="p-2 mt-2">
                                        <em class="text-muted">Sve Prijave</em>
                                        <textarea ng-model="activityLog" rows="30" class="form-control" style="background-color:#3a3a3a; color:#03f144"></textarea>
                                        <div class="text-right mt-2">
                                            <button class="btn btn-outline-primary" ng-click="saveLog('activity.log', activityLog)"><i class="fa fa-save"></i> Spremi</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div ng-if="activeTab==='tickets'">
                <div class="mt-3">
                    <div ng-if="loading" class="text-center text-primary">
                        <label class="lead text-primary">Učitavanje...</label>
                        <div><i class="fa fa-spinner fa-spin fa-3x fa-fw"></i></div>
                    </div>
                    <div ng-if="!loading">
                        <div class="row p-2 pl-3">
                            <div class="col-sm-3 p-1">
                                <select ng-model="ticketType" class="form-control" title="status" ng-change="loadTickets(ticketType, ticketStatus)">
                                    <option value=null ng-selected="ticketType==null?true:false">Svi Ticketi</option>
                                    <option value="0" ng-selected="ticketType==0?true:false">Korisnički Ticketi</option>
                                    <option value="1" ng-selected="ticketType==1?true:false">Moji Ticketi</option>
                                </select>
                            </div>
                            <div class="col-sm-3 p-1">
                                <select ng-model="ticketStatus" class="form-control" title="status" ng-change="loadTickets(ticketType, ticketStatus)">
                                    <option value=null ng-selected="ticketStatus==null?true:false">Svi</option>
                                    <option value="0" ng-selected="ticketStatus==0?true:false">Na čekanju</option>
                                    <option value="1" ng-selected="ticketStatus==1?true:false">Otvoren</option>
                                    <option value="2" ng-selected="ticketStatus==2?true:false">Zatvoren</option>
                                    <option value="3" ng-selected="ticketStatus==3?true:false">Odbijen</option>
                                </select>
                            </div>
                            <div class="col-sm-3 p-1 text-right">
                                <button ng-click="addTicket()" class="btn btn-outline-success"><i class="fa fa-plus"></i> Novi Ticket</button>
                            </div>
                        </div>
                        <div class="card m-3" ng-repeat="x in tickets track by $index">
                            <div class="card-header">
                                <a href="" ng-click="removeTicket(x)" class="close" style="color:red!important" title="briši">&times;</a>
                                <div class="text-secondary small">
                                    {{x.reportDate}}
                                </div>
                                <div class="form-inline pt-2">
                                    <i class="{{getStatusIcon(x.status)}}" style="padding-right:5px"></i>
                                    <input ng-model="x.title" class="form-control" />
                                    <span class="text-muted pl-2"><em>{{x.desc.length > 80 ? x.desc.substring(0, 77) + '...' : x.desc}}</em></span>
                                </div>
                                <div class="row">
                                    <div class="col-sm-6">
                                        <a href="" ng-click="showTicketDetails($index)">Detalji <i class="fa fa-caret-right"></i></a>
                                    </div>
                                    <div class="col-sm-6 text-right">
                                        <code>{{x.user.firstName}} {{x.user.lastName}}</code>
                                    </div>
                                </div>
                            </div>
                            <div ng-if="currIdx===$index" class="card-body p-2">
                                <div class="row">
                                    <div class="col-sm-6">
                                        <ul>
                                            <li>Email: {{x.user.email}}</li>
                                            <li>Prijavio: {{x.user.firstName}} {{x.user.lastName}}</li>
                                        </ul>
                                    </div>
                                    <div class="col-sm-6">
                                        <code ng-if="x.filePath">
                                            <a ng-if="x.filePath" href="{{x.filePath}}" title="{{x.filePath}}" class="small" target="_blank"><i class="fa fa-file"></i> {{x.filePath}}</a>
                                        </code>
                                    </div>
                                </div>
                                <div>
                                    <span>Opis:</span>
                                    <textarea ng-model="x.desc" typeof="text" class="form-control" rows="8" />
                                </div>
                            </div>
                            <div class="card-footer p-2">
                                <div class="row">
                                    <div class="col-sm-2">
                                        <span>Status:</span>
                                        <select ng-model="x.status" class="form-control" title="status">
                                            <option value="0" ng-selected="x.status==0?true:false">Na čekanju</option>
                                            <option value="1" ng-selected="x.status==1?true:false">Otvoren</option>
                                            <option value="2" ng-selected="x.status==2?true:false">Zatvoren</option>
                                            <option value="3" ng-selected="x.status==3?true:false">Odbijen</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-2">
                                        <span>Prioritet:</span>
                                        <select ng-model="x.priority" class="form-control" title="status">
                                            <option value="0" ng-selected="x.priority==0?true:false">Nizak</option>
                                            <option value="1" ng-selected="x.priority==1?true:false">Srednji</option>
                                            <option value="2" ng-selected="x.priority==2?true:false">Visok</option>
                                        </select>
                                    </div>
                                    <div class="col-sm-6">
                                        <span>Napomena:</span>
                                        <textarea ng-model="x.note" type="text" class="form-control" rows="1" />
                                    </div>
                                    <div class="col-sm-2 text-right">
                                        <button class="btn btn-outline-success mt-2" ng-click="saveTicket(x, false)"><i class="fa fa-save"></i> Spremi</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Modal -->
            <div class="modal fade" id="myModal" role="dialog" style="margin-top:150px">
                <div class="modal-dialog">
                    <!-- Modal content-->
                    <div class="modal-content">
                        <div class="modal-header">
                            <h4 class="modal-title">{{currUser.firstName}} {{currUser.lastName}}</h4>
                            <button type="button" class="close" data-dismiss="modal">&times;</button>
                        </div>
                        <div class="modal-body">
                            <p>{{currUser.companyName}}</p>
                            <ul>
                                <li>UserId: {{currUser.userId}}</li>
                                <li>UserGroupId: {{currUser.userGroupId}}</li>
                                <li>Broj prijava u aplikaciju: <span class="badge badge-success">{{currUser.loginLog.loginCount}}</span></li>
                                <li>Zadnja prijava: {{currUser.loginLog.lastLogin}}</li>
                            </ul>
                            <hr />
                            <h4 class="modal-title">Ukupno:</h4>
                            <ul class="list-group">
                                <li class="list-group-item">Klijenti: <span class="badge badge-secondary float-right">Ukupno: {{userTotal.clients.total}}, Tekući mjesec: {{userTotal.clients.currMonthTotal}} ({{userTotal.clients.maxMonthlyNumberOfClients}})</span></li>
                                <li class="list-group-item">Jelovnici: <span class="badge badge-secondary float-right">{{userTotal.menues}}</span></li>
								<li class="list-group-item">Tjedni jelovnici: <span class="badge badge-secondary float-right">{{userTotal.weeklyMenus}}</span></li>
                                <li class="list-group-item">Namirnice: 
                                    <button ng-if="userTotal.myfoods>0" ng-click="countMyFoodsWithSameIdAsAppFoods(currUser)" class="btn btn-outline-primary btn-sm"><i class="fa fa-check"></i> Provjeri Moje Namirnice</button> 
                                    <button ng-if="userTotal.myfoods>0" ng-click="fixMyFoodsId(currUser)" class="btn btn-outline-primary btn-sm"><i class="fa fa-wrench"></i> Popravi ID</button> 
                                    <span class="badge badge-secondary float-right">{{userTotal.myfoods}}</span>
                                </li>
                                <li class="list-group-item">Recepti: <span class="badge badge-secondary float-right">{{userTotal.recipes}}</span></li>
                                <li class="list-group-item">Obroci: <span class="badge badge-secondary float-right">{{userTotal.meals}}</span></li>
                                <li class="list-group-item">Kalendar: <span class="badge badge-secondary float-right">{{userTotal.scheduler.total}}</span></li>
                            </ul>
                        </div>
                        <div class="modal-footer">
                            <button type="button" class="btn btn-outline-primary" data-dismiss="modal">Zatvori</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="programPrehrane5">
        <div ng-controller="applicationCtrl" class="container-fluid">
            <h2>Program Prehrane 5.0</h2>
            <h3>Instalacije i aktivacije</h3>
            <div class="table-responsive table-scroll" style="max-height:600px">
                <table class="table table-sm">
                    <tr>
                        <td>Br.</td>
                        <th>Datum</th>
                        <th>Program</th>
                        <th>Verzija</th>
                        <th>Akcija</th>
                        <th>IP adresa</th>
                    </tr>
                    <tr ng-repeat="x in d">
                        <td>{{x.id}}</td>
                        <td>{{x.instalDate}}</td>
                        <td>{{x.application}}</td>
                        <td>{{x.version}}</td>
                        <td>{{x.action}}</td>
                        <td>{{x.ipAddress}}</td>
                    </tr>
                </table>
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="orders">
        <div ng-controller="ordersCtrl" class="container-fluid">
            <h2>Narudžbe</h2>
            <div class="row m-2">
                <div class="col-sm-2">
                    <select ng-model="year" class="form-control" ng-change="load(year, searchOrders)">
                        <option ng-selected="x==year?true:false" ng-repeat="x in years">{{x}}</option>
                    </select>
                </div>
                <div class="col-sm-3">
                    <form>
                        <div class="input-group">
                            <input ng-model="searchOrders" type="text" class="form-control" placeholder="Pretraži...">
                            <div class="input-group-append">
                                <button class="btn btn-outline-secondary" type="submit" ng-click="load(year, searchOrders)">
                                    <i class="fa fa-search"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
            </div>
            <div class="table-responsive table-scroll" style="max-height:600px">
                <table class="table table-sm">
                    <tr>
                        <th></th>
                        <th>Br.</th>
                        <th>Br. narudžbe</th>
                        <th>Datum</th>
                        <th>Ime</th>
                        <th>Prezime</th>
                        <th>Tvrtka</th>
                        <th>Adresa</th>
                        <th class="nowrap">Poštanski broj</th>
                        <th>Grad</th>
                        <th>Država</th>
                        <th>OIB</th>
                        <th>Email</th>
                        <th>Verzija</th>
                        <th>Licenca</th>
                        <th>Broj licenci</th>
                        <th>Cijena</th>
                        <th>Popust</th>
                        <th>Cijena sa popustom</th>
                        <th>Dodatna usluga</th>
                        <th>Napomena</th>
                        <th></th>
                    </tr>
                    <tr ng-repeat="x in orders">
                        <td><button class="btn btn-outline-success" ng-click="createInvoice(x, 'invoices')" title="Račun"><i class="fa fa-file-invoice"></i></button></td>
                        <td>{{orders.length - $index}}</td>
                        <td>{{x.orderNumber}}</td>
                        <td style="white-space: nowrap">{{x.orderDate}}</td>
                        <td>{{x.firstName}}</td>
                        <td>{{x.lastName}}</td>
                        <td>{{x.companyName}}</td>
                        <td class="nowrap">{{x.address}}</td>
                        <td>{{x.postalCode}}</td>
                        <td>{{x.city}}</td>
                        <td>{{x.country}}</td>
                        <td>{{x.pin}}</td>
                        <td>{{x.email}}</td>
                        <td>{{x.version}}</td>
                        <td>{{x.licence}}</td>
                        <td>{{x.licenceNumber}}</td>
                        <td class="text-right">{{x.price}}</td>
                        <td class="text-right"><span ng-if="x.discountCoeff">{{x.discountCoeff * 100}}%</span></td>
                        <td class="text-right"><span ng-if="x.priceWithDiscount">{{x.priceWithDiscount}}</span></td>
                        <td>{{x.additionalService}}</td>
                        <td>{{x.note}}</td>
                        <td><button ng-click="remove(x)" class="btn btn-outline-danger" title="Briši"><i class="fa fa-trash-alt"></i></button></td>
                    </tr>
                </table>
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="invoices">
        <div ng-controller="invoiceCtrl" class="container-fluid">
            <h2>Računi</h2>
            <div>
                <ul class="nav nav-tabs">
                    <li class="nav-item" ng-class="!showInvoices?'nav-link active':'nav-link'" ng-click="init()"><a href=""><i class="fa fa-file"></i> Novi račun</a></li>
                    <li class="nav-item" ng-class="showInvoices?'nav-link active':'nav-link'" ng-click="load(year, null)"><a href=""><i class="fa fa-copy"></i> Pregled računa</a></li>
                </ul>
            </div>
            <div ng-if="showInvoices">
                <div class="row m-2">
                    <div class="col-sm-2">
                        <select ng-model="year" class="form-control" ng-change="load(year, searchInvoices)">
                            <option ng-selected="x==year?true:false"  ng-repeat="x in invoices.years">{{x}}</option>
                        </select>
                    </div>
                    <div class="col-sm-3">
                        <form>
                            <div class="input-group">
                                <input ng-model="searchInvoices" type="text" class="form-control" placeholder="Pretraži...">
                                <div class="input-group-append">
                                    <button class="btn btn-outline-secondary" type="submit" ng-click="load(year, searchInvoices)">
                                        <i class="fa fa-search"></i>
                                    </button>
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
                <div class="table-responsive table-scroll" style="height:70vh">
                    <table class="table table-sm">
                        <tr>
                            <td colspan="6"></td>
                            <td class="text-right">Ukupno:</td>
                            <td class="text-right nowrap"><label class="bg-info text-white font-weight-bold p-1 px-2">{{invoices.total | currency : ""}} kn</label></td>
                            <td class="text-right nowrap"><label class="bg-success text-white font-weight-bold p-1 px-2">{{invoices.paidAmount | currency : ""}} kn</label></td>
                            <td class="text-right nowrap"><label class="bg-{{invoices.restToPaid>=0?'success':'danger'}} text-white font-weight-bold p-1 px-2">{{invoices.restToPaid | currency : ""}} kn</label></td>
                            <td></td>
                        </tr>
                        <tr>
                            <th></th>
                            <th>Broj</th>
                            <th>Datum i vrijeme</th>
                            <th>Ime</th>
                            <th>Prezime</th>
                            <th>Tvrtka</th>
                            <th>Proizvod</th>
                            <th class="nowrap text-right">Iznos (kn)</th>
                            <th class="nowrap text-right">Uplaćeno (kn)</th>
                            <th class="nowrap text-right">Ostatak (kn)</th>
                            <th>Datum uplate</th>
                        </tr>
                        <tr ng-repeat="x in invoices.data" class="{{x.isPaid==0?'bg-danger text-white':''}}">
                            <td class="nowrap">
                                <button class="btn btn-primary m-1" ng-click="get(x)" title="Uredi"><i class="fa fa-eye"></i></button>
                                <a href="{{config.backend + 'upload/invoice/' + x.year + '/'+ x.fileName + '.pdf'}}" class="btn btn-danger m2" download title="PDF"><i class="fa fa-file-pdf" style="color:white"></i></a>
                                <button class="btn btn-warning m-1" ng-click="copy(x)" title="Kopiraj"><i class="fa fa-copy"></i></button>
                                <button ng-if="config.debug" class="btn btn-danger m-1" ng-click="removeInvoice(x, year, searchInvoices)" title="Briši"><i class="fa fa-trash-alt"></i></button>
                            </td>
                            <td>{{x.number}}</td>
                            <td>{{x.dateAndTime}}</td>
                            <td>{{x.firstName}}</td>
                            <td>{{x.lastName}}</td>
                            <td>{{x.companyName}}</td>
                            <td>
                                <div ng-repeat="y in x.items"><span>{{$index+1}}.</span> {{y.title}}, {{y.qty}} kom., {{y.unitPrice}} kn</div>
                            </td>
                            <td class="text-right">{{x.total | currency : ""}}</td>
                            <td class="text-right">{{x.paidAmount | currency : ""}}</td>
                            <td class="text-right {{x.restToPaid>=0?'':'text-danger'}}">{{x.restToPaid | currency : ""}}</td>
                            <td>{{x.paidDate}}</td>
                        </tr>
                    </table>
                </div>
            </div>
            <div ng-if="!showInvoices">
                <div class="row mt-3">
                    <div class="col-sm-4">
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <tr>
                                    <td>Broj računa</td>
                                    <td>
                                        <div class="input-group">
                                            <input ng-model="i.number" type="number" class="form-control text-right" />
                                            <div class="input-group-append">
                                                <button class="btn btn-outline-secondary" type="submit">/1/1</button>
                                            </div>
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>Datum i vrijeme</td>
                                    <td><input ng-model="i.dateAndTime" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Ime</td>
                                    <td><input ng-model="i.firstName" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Prezime</td>
                                    <td><input ng-model="i.lastName" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Tvrtka</td>
                                    <td><input ng-model="i.companyName" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Ulica i broj</td>
                                    <td><input ng-model="i.address" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Poštanski broj</td>
                                    <td><input ng-model="i.postalCode" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Grad</td>
                                    <td><input ng-model="i.city" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Država</td>
                                    <td><input ng-model="i.country" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>OIB</td>
                                    <td><input ng-model="i.pin" type="text" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Napomena</td>
                                    <td><textarea ng-model="i.note" type="text" class="form-control" rows="3" /></td>
                                </tr>
                            </table>
                        </div>
                        <div class="checkbox">
                            <label><input ng-model="i.showSignature" type="checkbox" /> Prikaži potpis</label>
                        </div>
                        <div class="checkbox">
                            <label><input ng-model="i.isElectronicBill" type="checkbox" ng-click="setNote(i)" /> Račun je ispostavljen elektroničkim putem...</label>
                        </div>
                    </div>
                    <div class="col-sm-8">
                        <label>Stavke:</label>
                        <div class="table-responsive">
                            <table class="table table-sm">
                                <tr>
                                    <th style="width:50px"></th>
                                    <th style="min-width:300px">Naziv proizvoda / usluge</th>
                                    <th style="width:80px">Količina</th>
                                    <th class="nowrap" style="width:80px">Jedinična cijena (kn)</th>
                                </tr>
                                <tr ng-repeat="x in i.items">
                                    <td><button class="btn btn-outline-danger" ng-click="remove($index)"><i class="fa fa-minus"></i></button></td>
                                    <td><input ng-model="x.title" type="text" class="form-control" ng-change="getTotal(i.items)" /></td>
                                    <td><input ng-model="x.qty" type="number" min="0" class="form-control" ng-change="getTotal(i.items)" /></td>
                                    <td><input ng-model="x.unitPrice" type="number" class="form-control text-right" ng-change="getTotal(i.items)" /></td>
                                </tr>
                                <tr>
                                    <td><button class="btn btn-outline-success" ng-click="add()"><i class="fa fa-plus"></i></button></td>
                                    <td colspan="2" class="text-right">Ukupno:</td>
                                    <td><input ng-model="total" type="number" class="form-control text-right" readonly /></td>
                                </tr>
                            </table>
                        </div>
                        <div class="checkbox">
                            <label><input ng-model="i.isPaid" type="checkbox" ng-click="setPaidAmount(i)" /> Plaćeno</label>
                        </div>
                        <div ng-if="i.isPaid" class="teble-responsive card">
                            <table class="table table-sm">
                                <tr>
                                    <td>Uplaćeni iznos</td>
                                    <td><input ng-model="i.paidAmount" type="number" class="form-control" /></td>
                                </tr>
                                <tr>
                                    <td>Datum uplate</td>
                                    <td><input ng-model="i.paidDate" type="text" class="form-control" /></td>
                                </tr>
                            </table>
                            <div class="text-right p-1">
                                <button class="btn btn-outline-success" ng-click="saveDb(i)"><i class="fa fa-{{loading_2==true?'spinner fa-spin':'save'}}"></i> Spremi</button>
                            </div>
                        </div>
                        <div style="margin-bottom:100px">
                            <div class="row mt-2">
                                <span class="col-sm-9 text-right">Poravnanje - klijent (300 desno, 0 lijevo):</span>
                                <div class="col-sm-3">
                                    <input ng-model="i.clientLeftSpacing" type="number" min="0" max="350" class="form-control text-right" />
                                </div>
                            </div>
                            <div class="row">
                                <div class="col-sm-3">
                                    <span>Vrsta dokumenta:</span>
                                    <select ng-model="i.docType" class="form-control">
                                        <option value="0" ng-selected="i.docType==0?true:false">Račun</option>
                                        <option value="1">Ponuda</option>
                                        <option value="2">Predračun</option>
                                    </select>
                                </div>
                                <div ng-if="i.docType>0" class="col-sm-3">
                                    <label>Broj {{i.docType==1?'ponude':'predračuna'}}</label>
                                    <input ng-model="i.orderNumber" type="number" class="form-control" />
                                </div>
                            </div>
                            <div class="checkbox">
                                <label><input ng-model="i.isForeign" type="checkbox" /> Inozemni račun</label>
                            </div>
                            <div ng-show="i.isForeign" class="row card py-2">
                                <span class="col-sm-4" for="email">Ukupno (€):</span>
                                <div class="col-sm-8">
                                    <input ng-model="i.totPrice_eur" class="form-control" type="number" />
                                </div>
                            </div>
                            <div class="mt-2">
                                <button class="btn btn-outline-danger" ng-click="createPdf(i)"><i class="fa fa-{{loading==true?'spinner fa-spin':'file-pdf'}}"></i> Kreiraj PDF</button>
                            </div>
                            <div class="m-2">
                                <a ng-if="pdfTempLink" href="{{pdfTempLink}}" download><i class="fa fa-file-pdf"></i> {{pdfTempLink}}</a>
                            </div>
                            <div class="row m-2">
                                <div class="col-sm-4">
                                    <button ng-if="pdfTempLink" href="" class="btn btn-outline-success btn-block" ng-click="save(i)"><i class="fa fa-{{loading_1==true?'spinner fa-spin':'save'}}"></i> Spremi PDF</button>
                                </div>
                                <div class="col-sm-8">
                                    <a ng-if="pdfLink" href="{{pdfLink}}" download><i class="fa fa-file-pdf"></i> {{pdfLink}}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <hr />
            </div>
        </div>
    </script>

    <script type="text/ng-template" id="settings">
        <div ng-controller="settingsCtrl" class="container">
            <h2>Postavke</h2>
            <div class="text-right m-2">
                <button ng-click="save(settings)" class="btn btn-success"><i class="fa fa-save"></i> Spremi</button>
            </div>
            <div class="card m-2">
                <div class="card-header">Popust</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-lg-2">
                            <div class="form-group">
                                <label>Popust (%):</label>
                                <input ng-model="settings.discount.perc" type="number" min="0" max="99" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>Od (YYYY-MM-DD):</label>
                                <input ng-model="settings.discount.dateFrom" type="text" placeholder="YYYY-MM-DD" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-3">
                            <div class="form-group">
                                <label>Do (YYYY-MM-DD):</label>
                                <input ng-model="settings.discount.dateTo" type="text" placeholder="YYYY-MM-DD" class="form-control">
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Naslov:</label>
                                <input ng-model="settings.discount.title" type="text" class="form-control">
                            </div>
                        </div>
                        <div class="col-lg-6">
                            <div class="form-group">
                                <label>Opis:</label>
                                <input ng-model="settings.discount.desc" type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                    <hr />
                    <div class="row">
                        <div class="col-lg-12">
                            <label>Popust za stare korisnike:</label>
                        </div>
                        <div class="col-lg-4" ng-repeat="x in settings.discount.oldUserDiscountPerc.packages">
                            <div class="form-group">
                                <label class="text-uppercase">{{x.package}} (%):</label>
                                <input ng-model="x.discountPerc" type="number" min="0" max="99" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card m-2">
                <div class="card-header">Program Prehrane 5.0</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <label>Download Enable Code:</label>
                                <input ng-model="settings.pp5DownloadEnableCode" type="text" class="form-control">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card m-2">
                <div class="card-header">Error Log Postavke</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="checkbox">
                                    <label><input ng-model="settings.errorLogSettings.showErorrLog" type="checkbox" /> Spremi Error Log</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="checkbox">
                                    <label><input ng-model="settings.errorLogSettings.showStackTrace" type="checkbox" /> Spremi STACK TRACE</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card m-2">
                <div class="card-header">Activity Log Postavke</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="checkbox">
                                    <label><input ng-model="settings.activityLogSettings.show" type="checkbox" /> Prikaži Activity Log</label>
                                </div>
                            </div>
                        </div>
                        <div class="col-sm-6">
                            <div class="form-group">
                                <div class="checkbox">
                                    <label><input ng-model="settings.activityLogSettings.save" type="checkbox" /> Spremi Activity Log</label>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="card m-2">
                <div class="card-header">Obavijest</div>
                <div class="card-body">
                    <div class="row">
                        <div class="col-sm-6">
                            <label class="pr-2"><input type="checkbox" ng-model="settings.appAlert.show" /> Prikaži obavijest</label>
                        </div>
                        <div class="col-sm-12">
                            <textarea ng-model="settings.appAlert.desc" rows="2" class="form-control" ></textarea>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </script>

    <script src="../assets/js/admin.js"></script>

    <script>
        $(document).ready(function(){
            $('[data-toggle="popover"]').popover();
        });
    </script>

    <style>
        /*****Fixed Table Header*****/
        table {
            text-align: left;
            position: relative;
            border-collapse: collapse;
        }
        th {
            background: white;
            position: sticky;
            position: -webkit-sticky; /* Safari */
            top: 0;
            box-shadow: 0 1px 1px -1px rgba(0, 0, 0, 0.4);
        }
        /*****Fixed Table Header*****/
    </style>
  
   
</body>
</html>

